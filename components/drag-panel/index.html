<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<head>
	<meta charset="UTF-8">
	<title>UI Panel</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
	<meta name="description" content="browser.style: ui panel">
	<meta name="format-detection" content="telephone=no">
	<link rel="icon" type="image/png" href="/favicon.ico" sizes="any">
	<link rel="icon" type="image/svg+xml" href="/favicon.svg">
	<link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png">

	<style>
		body {
			background: gainsboro;
			height: 200dvh;
		}

		ui-overlay {
			--ui-bdrs: 1.4375rem;
			--ui-bxsh-lg: 0px 10px 60px rgba(0, 0, 0, 0.25);
			--ui-dock-bg: hsla(0, 0%, 100%, 0.97);
			--ui-dock-bs: 5rem;
			--ui-gap: 1rem;
			--ui-panel-bg: #FFF;
			--ui-panel-gap: 20px;
			--ui-panel-is: 320px;
			--ui-panel-mbs: 140px;
			--ui-panel-x: calc(100% - var(--ui-panel-is) - var(--ui-gap));
			--ui-panel-y: var(--ui-gap);

			font-family: ui-sans-serif, system-ui, sans-serif;
			inset: 0;
			isolate: isolate;
			position: fixed;
		}

		ui-dock {
			align-items: center;
			background-color: var(--ui-dock-bg);
			block-size: var(--ui-dock-bs);
			border-radius: var(--ui-bdrs);
			display: flex;
			inset-block-end: var(--ui-gap);
			inset-inline: var(--ui-gap);
			justify-content: center;
			position: fixed;
		}

		ui-panel {
			background: var(--ui-panel-bg);
			block-size: var(--ui-panel-bs, auto);
			border-radius: var(--ui-bdrs);
			box-shadow: var(--ui-bxsh-lg);
			box-sizing: border-box;
			display: grid;
			grid-template-rows: min-content min-content 1fr min-content;
			inline-size: var(--ui-panel-is);
			inset-block-start: var(--ui-panel-y);
			inset-inline-start: var(--ui-panel-x);
			min-block-size: var(--ui-panel-mbs);
			padding-inline: var(--ui-panel-gap);
			position: fixed;
			z-index: var(--ui-panel-z, 1);
		}

		ui-panel[data-position="left"] {
			--ui-panel-x: var(--ui-gap);
		}

		ui-panel-header {
			align-items: center;
			background: inherit;
			block-size: 2em;
			border-radius: var(--ui-bdrs) var(--ui-bdrs) 0 0;
			cursor: grab;
			display: flex;
			justify-content: space-between;
			padding-block: 20px 15px;
			user-select: none;
		}
		ui-panel-header [aria-label="close"] {
			block-size: 30px;
			border-width: 0;
			border-radius: 50%;
			inline-size: 30px;
			background: #F2F2F7;
			padding: 0;
			
		}
		ui-panel-header [disabled] {
			opacity: 0;
		}

		ui-panel-content {
			block-size: 100%;
			display: block;
			overflow-x: hidden;
			overflow-y: scroll;
			scrollbar-gutter: stable;
		}


		ui-panel-content::-webkit-scrollbar {
			width: 9px;
			height: 9px;
		}
		ui-panel-content::-webkit-scrollbar-track,
		ui-panel-content::-webkit-scrollbar-thumb {
			border-radius: 16px;
			border: solid 3px transparent;
		}
		ui-panel-content::-webkit-scrollbar-track {
			/* box-shadow: inset 0 0 5px 5px rgba(0, 0, 0, 0.075); */
		}
		ui-panel-content::-webkit-scrollbar-thumb {
			box-shadow: inset 0 0 3px 3px rgba(0, 0, 0, 0.15);
		}


		ui-resize-handle {
			block-size: 1.33em;
			cursor: ns-resize;
			display: block;
		}
		ui-resize-handle::after {
			background: hsla(0, 0%, 11.76%, 0.5);
			border-radius: 1em;
			content: "";
			display: block;
			height: 0.33rem;
			margin-block: .5rem;
			margin-inline: auto;
			width: 5rem;
		}

		ui-tab-group {
			--_tg-bdrs: 0.5rem;
			--_tg-p: 4px;

			align-items: center;
			background: rgba(118, 118, 128, 0.12);
			border-radius: var(--_tg-bdrs);
			display: flex;
			justify-content: space-between;
			padding: var(--_tg-p);
			user-select: none;
		}
		ui-tab-group label:has(:checked) {
			background: #fff;
			box-shadow: 0px 3px 8px rgba(0, 0, 0, 0.12), 0px 3px 1px rgba(0, 0, 0, 0.04);
		}
		ui-tab-group label {
			border-radius: calc(var(--_tg-bdrs) - (var(--_tg-p) / 2));
			padding: .5em;
		}

		[data-sr] { 
			clip: rect(0 0 0 0);
			clip-path: inset(50%);
			height: 1px;
			left: 0;
			overflow: hidden;
			position: absolute;
			white-space: nowrap;
			width: 1px;
		}
	</style>
</head>
<body>
	<main>


	</main>

	<ui-overlay>
	
		<ui-panel data-position="draggable">
			<ui-panel-header>
				<button type="button" aria-label="close">-</button>
				<strong>Layout</strong>
				<button type="button" aria-label="close">âœ•</button>
			</ui-panel-header>
			
			<ui-panel-nav>
				<ui-tab-group>
					<label>
						<input type="radio" name="tab" value="1" checked data-sr>
						Tab 1
					</label>
					<label>
						<input type="radio" name="tab" value="2" data-sr>
						Tab 2
					</label>
					<label>
						<input type="radio" name="tab" value="3" data-sr>
						Tab 3
					</label>
					<label>
						<input type="radio" name="tab" value="4" data-sr>
						Tab 4
					</label>
				</ui-tab-group>
			</ui-panel-nav>

			<ui-panel-content>
				<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Iusto, quae impedit ad amet facere odit quo cupiditate sint. Voluptatibus sunt iure corporis autem. Totam possimus laboriosam nihil molestiae placeat aperiam quisquam molestias animi sed dolore quidem alias deleniti dolorum sunt repellat unde minus aliquam a modi officia corporis, perspiciatis debitis rerum. Quos tempore, temporibus modi odio officia beatae debitis numquam excepturi expedita ipsum architecto illo blanditiis ipsa dolor quibusdam? Earum quis nesciunt, maxime repellat voluptatibus dolor eos obcaecati repudiandae aut? Facere quasi ut eaque illum cumque, maxime necessitatibus numquam sit distinctio ea quia doloribus quisquam velit delectus reiciendis, voluptatem quos.</p>
			</ui-panel-content>
			<ui-resize-handle></ui-resize-handle>
		</ui-panel>

		<ui-panel data-position="left">
			<ui-panel-nav>
				SEARCH
			</ui-panel-nav>
			<ui-panel-content>
				<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Iusto, quae impedit ad amet facere odit quo cupiditate sint. Voluptatibus sunt iure corporis autem. Totam possimus laboriosam nihil molestiae placeat aperiam quisquam molestias animi sed dolore quidem alias deleniti dolorum sunt repellat unde minus aliquam a modi officia corporis, perspiciatis debitis rerum. Quos tempore, temporibus modi odio officia beatae debitis numquam excepturi expedita ipsum architecto illo blanditiis ipsa dolor quibusdam? Earum quis nesciunt, maxime repellat voluptatibus dolor eos obcaecati repudiandae aut? Facere quasi ut eaque illum cumque, maxime necessitatibus numquam sit distinctio ea quia doloribus quisquam velit delectus reiciendis, voluptatem quos.</p>
			</ui-panel-content>
		</ui-panel>
	
	<ui-dock>HELLO</ui-dock>
</ui-overlay>
	<script>

class uiPanel {
  constructor(panel, settings) {
		this.settings = Object.assign({
			minHeight: '140px'
		}, settings)
    this.panel = panel
		this.dragArea = panel.querySelector("ui-panel-header")
		this.resizeHandle = panel.querySelector("ui-resize-handle")
		this.init()
  }

	init() {
		this.bindings = {
			dragDown: this.dragDown.bind(this),
			dragUp: this.dragUp.bind(this),
			dragMove: this.dragMove.bind(this),
			resizeUp: this.resizeUp.bind(this),
			resizeMove: this.resizeMove.bind(this),
		}
		this?.dragArea.addEventListener('pointerdown', (e) => this.dragDown(e))
		this?.dragArea.addEventListener('dblclick', () => this.expandCollapse())
		this?.resizeHandle.addEventListener('pointerdown', (e) => this.resizeDown(e))
	}

	dragDown(e) {
		e.preventDefault()
		this.x = 0
		this.y = 0
		this.cx = e.clientX
		this.cy = e.clientY
		document.addEventListener('pointerup', this.bindings.dragUp)
		document.addEventListener('pointermove', this.bindings.dragMove)
	}

	dragMove(e) {
		e.preventDefault()
		this.x = this.cx - e.clientX
		this.y = this.cy - e.clientY
		this.cx = e.clientX
		this.cy = e.clientY
		this.panel.style.top = (this.panel.offsetTop - this.y) + "px"
		this.panel.style.left = (this.panel.offsetLeft - this.x) + "px"
	}

	dragUp() {
		document.removeEventListener('pointerup', this.bindings.dragUp)
		document.removeEventListener('pointermove', this.bindings.dragMove)
	}

	expandCollapse() {
		const BS = this.panel.style.getPropertyValue('--ui-panel-bs')
		this.panel.style.setProperty('--ui-panel-bs', BS === 'auto' ? this.settings.minHeight : 'auto')
	}

	resizeDown(e) {
		e.preventDefault();
		this.RY = 0;
		this.ry = e.clientY;
		document.addEventListener('pointerup', this.bindings.resizeUp)
		document.addEventListener('pointermove', this.bindings.resizeMove)
	}

	resizeMove(e) {
		e.preventDefault();
		this.RY = this.ry - e.clientY
		this.ry = e.clientY
		this.panel.style.setProperty('--ui-panel-bs', (this.panel.offsetHeight - this.RY) + "px")
	}

	resizeUp() {
		document.removeEventListener('pointerup', this.bindings.resizeUp)
		document.removeEventListener('pointermove', this.bindings.resizeMove)
	}
}

// new uiPanel(document.querySelector("[data-position='draggable']"))


UIPanel(document.querySelector("[data-position='draggable']"));


function UIPanel(panel, settings = { minHeight: '140px' }) {
	const dragArea = panel.querySelector("ui-panel-header")
	const resizeHandle = panel.querySelector("ui-resize-handle")
	let x, y, cx, cy, ry, rcy

	if (dragArea) {
		dragArea.addEventListener('pointerdown', dragDown);
		dragArea.addEventListener('dblclick', () => {
			const bs = panel.style.getPropertyValue('--ui-panel-bs')
			panel.style.setProperty('--ui-panel-bs', bs === 'auto' ? settings.minHeight : 'auto')
		})
	}
	if (resizeHandle) {
		resizeHandle.addEventListener('pointerdown', resizeDown)
	}

	function dragDown(e) {
		// e.preventDefault()
		cx = e.clientX
		cy = e.clientY
		document.addEventListener('pointerup', dragUp)
		document.addEventListener('pointermove', dragMove)
	}
	function dragMove(e) {
		e.preventDefault()
		x = cx - e.clientX
		y = cy - e.clientY
		cx = e.clientX
		cy = e.clientY
		panel.style.top = (panel.offsetTop - y) + "px"
		panel.style.left = (panel.offsetLeft - x) + "px"
	}
	function dragUp() {
		document.removeEventListener('pointerup', dragUp)
		document.removeEventListener('pointermove', dragMove)
	}
	function resizeDown(e) {
		rcy = e.clientY
		document.addEventListener('pointerup', resizeUp);
		document.addEventListener('pointermove', resizeMove)
	}
	function resizeMove(e) {
		e.preventDefault();
		ry = rcy - e.clientY
		rcy = e.clientY
		panel.style.setProperty('--ui-panel-bs', (panel.offsetHeight - ry) + "px")
	}
	function resizeUp() {
		document.removeEventListener('pointerup', resizeUp)
		document.removeEventListener('pointermove', resizeMove)
	}
}


	</script>
</body>
</html>