<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<head>
	<title>Fret Board</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
	<meta name="description" content="Analog Clock: CSS-driven analog clock with JavaScript initialization.">
  <meta name="view-transition" content="same-origin">
	<link rel="stylesheet" href="/base.css">
	<link rel="stylesheet" href="/ui/grid/ui-grid.css">

	<style>
		fret-board {
			--fret-board-bg: light-dark(#EEE, #333);
			--fret-board-fret-c: light-dark(#000, #FFF);
			--fret-board-fret-w: clamp(0.0625rem, 0.03125rem + 0.5cqi, 0.5rem);
			--fret-board-string-c: light-dark(#0008, #FFF8);
			--fret-board-string-w: clamp(0.0625rem, 0.03125rem + 0.5cqi, 0.125rem);

			/* private consts */
			--_frets: attr(frets type(<number>), 4);
			--_strings: attr(strings type(<number>), 6);

			aspect-ratio: 1 / 1;
			background-color: var(--fret-board-bg);
			border-radius: var(--fret-board-bdrs, .5rem);
			box-sizing: border-box;
			container-type: inline-size;
			display: grid;
			font-family: var(--fret-board-ff, inherit);
			grid-template-columns: repeat(calc(var(--_strings) * 2), 1fr);
			grid-template-rows:
				var(--fret-board-top-row-h, 12%)
				repeat(calc(var(--_frets)), 1fr)
				var(--fret-board-bottom-row-h, 15%);
			place-items: center;

			/* Grid Lines (frets and strings) */
			&::before {
				background-image:
					linear-gradient(90deg, var(--fret-board-string-c) var(--fret-board-string-w), #0000 0 var(--fret-board-string-w)),
					linear-gradient(180deg,  var(--fret-board-fret-c) var(--fret-board-fret-w), #0000 0 var(--fret-board-fret-w));
				background-repeat: repeat-x, repeat-y;
				background-size:
					calc(100% / (var(--_strings) - 1) - (var(--fret-board-string-w) / var(--_strings))) 100%,
					100% calc(100% / var(--_frets) - (var(--fret-board-fret-w) / var(--_frets)));
				box-shadow: 0 calc(0px - var(--fred-board-fret-bbsw, 1.5cqi)) 0 0 var(--fret-board-fret-c);
				content: '';
				display: block;
				grid-area: 2 / 2 / calc(var(--_frets) + 2) / calc(var(--_strings) * 2);
				height: 100%;
				width: 100%;
			}
			/* Chord Name */
			&::after {
				color: var(--fret-board-chord-c, light-dark(#222, #FFF));
				content: attr(chord);
				font-size: var(--fret-board-chord-fs, 7.5cqi);
				font-weight: var(--fret-board-chord-fw, 500);
				grid-column: 2 / span calc((var(--_strings) * 2) - 2);
				grid-row: calc(var(--_frets) + 2);
				text-align: center;
				width: 100%;
			}

			/* Fret Number (optional). Set <li value="[number]"> to set fret offset */
			ol {
				align-items: center;
				display: grid;
				font-size: var(--fret-board-fret-number-fs, 5cqi);
				font-weight: var(--fret-board-fret-number-fw, 400);
				grid-column: 1;
				grid-row: 2 / span var(--_frets);
				grid-template-rows: repeat(var(--_frets), 1fr);
				height: 100%;
				list-style-position: inside;
				padding: 0;
			}
		}

		guitar-note {
			--guitar-note-h: 12cqi;
			--guitar-note-open-mute-h: 5cqi;

			/* from attr() */
			--barre: attr(barre type(<number>), 1);
			--fret:  attr(fret type(<number>), 0);
			--string:  attr(string type(<number>), 0);

			aspect-ratio: 1;
			background-color: var(--guitar-note-bg, currentColor);
			border-radius: 50%; 
			box-sizing: border-box;
			display: grid;
			grid-column: calc((var(--_strings) * 2) - (var(--string) * 2 - 1)) / span calc(var(--barre) * 2);
			grid-row: calc(var(--fret) + 1);
			height: var(--guitar-note-h);
			isolation: isolate;
			list-style: none;
			place-content: center;

			&::after {
				color: var(--guitar-note-c, light-dark(#FFF, #222));
				content: attr(finger);
				font-size: var(--guitar-note-fs, 7cqi);
				font-weight: var(--guitar-note-fw, 500);
			}
			&[barre] {
				aspect-ratio: unset;
				border-radius: var(--guitar-note-h);
				opacity: var(--guitar-note-barre-o, .6);
				width: 100%;
			}
			&[mute], &[open] {
				height: var(--guitar-note-open-mute-h);
				width: var(--guitar-note-open-mute-h);
			}
			&[mute] {
				border-image: conic-gradient(var(--fret-board-bg) 0 0) 50%/calc(50% - 0.25cqi);
				rotate: 45deg;
			}
			&[open] {
				border-radius: 50%;
				mask: radial-gradient(circle farthest-side at center, #0000 calc(100% - 1cqi), #000 calc(100% - 1cqi + 1px));
			}
		}
	</style>
</head>
<body>
	<h1>UI: Components</h1>

	<h2>Fret Board</h2>
	<p><strong>Fret Board</strong> is a custom element that displays guitar or ukulele chords. It hosts <strong>Guitar Note</strong> elements that represent individual notes on the fretboard, supporting muted strings, open strings, fret positions, finger numbers, and barre chords. The layout automatically adjusts based on the specified number of frets and strings. JavaScript is <strong>not</strong> required, but the components use the updated <code>attr()</code>-method in CSS, currently only available in Chrome.</p>

	<div class="ui-grid --xs-c-1 --sm-c-2 --md-c-3">

		<fret-board frets="4" strings="6" chord="C Major">
			<guitar-note string="6" mute></guitar-note>
			<guitar-note string="5" fret="3" finger="3"></guitar-note>
			<guitar-note string="4" fret="2" finger="2"></guitar-note>
			<guitar-note string="3" open></guitar-note>
			<guitar-note string="2" fret="1" finger="1"></guitar-note>
			<guitar-note string="1" open></guitar-note>
		</fret-board>

		<fret-board frets="4" strings="6" chord="F Major">
			<guitar-note string="6" fret="1" barre="6" finger="1"></guitar-note>
			<guitar-note string="3" fret="2" finger="2"></guitar-note>
			<guitar-note string="5" fret="3" finger="3"></guitar-note>
			<guitar-note string="4" fret="3" finger="4"></guitar-note>
		</fret-board>

		<fret-board frets="4" strings="6" chord="G Major">
			<guitar-note string="6" fret="3" finger="2"></guitar-note>
			<guitar-note string="5" fret="2" finger="1"></guitar-note>
			<guitar-note string="4" open></guitar-note>
			<guitar-note string="3" open></guitar-note>
			<guitar-note string="2" open></guitar-note>
			<guitar-note string="1" fret="3" finger="3"></guitar-note>
		</fret-board>

		<fret-board frets="4" strings="6" chord="A♭ Major">
			<guitar-note string="6" fret="1" barre="6" finger="1"></guitar-note>
			<guitar-note string="3" fret="2" finger="2"></guitar-note>
			<guitar-note string="5" fret="3" finger="3"></guitar-note>
			<guitar-note string="4" fret="3" finger="4"></guitar-note>
			<ol><li value="4"></li><li></li><li></li><li></li></ol>
		</fret-board>

		<fret-board frets="4" strings="6" chord="G♯ Minor">
			<guitar-note string="6" fret="1" barre="6" finger="1"></guitar-note>
			<guitar-note string="5" fret="3" finger="3"></guitar-note>
			<guitar-note string="4" fret="3" finger="4"></guitar-note>
			<ol><li value="4"></li><li></li><li></li><li></li></ol>
		</fret-board>

		<fret-board frets="4" strings="6" chord="A♭6">
			<guitar-note string="4" fret="1" barre="4" finger="1"></guitar-note>
			<guitar-note string="5" fret="3" finger="3"></guitar-note>
			<guitar-note string="6" fret="4" finger="4"></guitar-note>
		</fret-board>

		<fret-board frets="3" strings="4" chord="Ukulele C♯7">
			<guitar-note string="4" fret="1" finger="1" barre="3"></guitar-note>
			<guitar-note string="1" fret="2" finger="2"></guitar-note>
		</fret-board>

	</div>

	<!-- <script type="module" src="./index.js"></script> -->
</body>
</html>