<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<head>
	<title>Circular Range</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
	<meta name="description" content="HTML is the foundation of the World Wide Web, and it is still the most popular markup language in use today.">
	<meta name="view-transition" content="same-origin">
	<link rel="stylesheet" href="/base.css">
	<script type="module" src="./index.js"></script>
	<style>
		#my-label {
  grid-row: 3; /* Places the label in the 4th row */
  grid-column: 1;
  align-self: end; /* Or start, end, etc. */
}
	</style>
</head>
<body>
	<h1>UI: Components</h1>

	<h2>Circular Range</h2>
	<p>
		...
	</p>

	<form id="app">
		<label>Range — Circular
			<circular-range id="speedometer" value="90" min="0" max="200" suffix="km/t" start="220" end="500" indices="50" labels="0:0,50:50,80:80,90:90,130:130,200:200">
				<div id="my-label">My Label</div>
			</circular-range>
		</label>

		<label>Range — Circular
			<circular-range value="20" min="0" max="100" suffix="kr" step="5" indices="25"></circular-range>
		</label>

		<label>Range — Circular
			<circular-range value="50" min="0" max="100" suffix="km/t" step="5" start="20" end="340"></circular-range>
		</label>

		<label>Range — Circular
			<circular-range value="50" min="0" max="100" suffix="kr" step="5" start="270" end="450"></circular-range>
		</label>

		<label>Range — Circular
			<circular-range value="50" min="0" max="100" suffix="%" step="5" start="90" end="270"></circular-range>
		</label>
	</form>

	<script>
		const speedometer = document.getElementById('speedometer');
		
		function updateSpeedometerColors(value) {
			// Always start with green
			speedometer.style.setProperty('--circular-range-fill-start', 'green');
			speedometer.style.setProperty('--circular-range-thumb', 'green');
			
			if (value > 150) {
				// Green to orange to red
				speedometer.style.setProperty('--circular-range-fill-middle', 'orange');
				speedometer.style.setProperty('--circular-range-fill-end', 'red');
				speedometer.style.setProperty('--circular-range-thumb', 'red');
			} else if (value > 100) {
				// Green to orange
				speedometer.style.setProperty('--circular-range-fill-middle', 'orange');
				speedometer.style.setProperty('--circular-range-fill-end', 'orange');
				speedometer.style.setProperty('--circular-range-thumb', 'orange');
			} else {
				// Just green
				speedometer.style.setProperty('--circular-range-fill-middle', 'green');
				speedometer.style.setProperty('--circular-range-fill-end', 'green');
				speedometer.style.setProperty('--circular-range-thumb', 'green');
			}
		}
		
		// Initialize colors based on current value
		updateSpeedometerColors(parseInt(speedometer.value));
		
		document.getElementById('app').addEventListener('input', event => {
			console.log(event.target.value);
			
			// Update speedometer colors if this is the speedometer element
			if (event.target.id === 'speedometer') {
				updateSpeedometerColors(parseInt(event.target.value));
			}
		});
	</script>
</body>
</html>