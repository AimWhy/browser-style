# Dynamic Data

The schema supports various types of dynamic data, allowing you to insert values from different sources. These are wrapped within a format akin to template literals: `${dynamic-data}`

## Dynamic Data Types

### 1. Translation Keys (`t:`)
Use the `t:` prefix to insert translated strings based on the current language setting and the `i18n`-object.

### 2. Variables (`v:`)
Use the `v:` prefix to insert global variables. Example: `${v:API}`

```json
{
  "render": {
    "method": "input",
    "attributes": [
      { "data-api": "${v:API}" }
    ]
  }
}
```

Global variables are defined in `constants` in `DataEntry`. 

You can set these direcly in JavaScript:

```js
entry.constants = {
  API: 'https://api.example.com',
  DEFAULT_CURRENCY: 'DKK'
}
```

### 3. Dynamic Methods (`d:`)
Use the `d:` prefix to call dynamic functions that generate values at runtime. Example: `${d:uuid}`

```json
{
  "type": "string",
  "title": "Created At",
  "value": "${d:now}",
  "render": {
    "method": "input"
  }
}
```

### 4. Object Values
Use `${object}` to insert any object in the data-source. Example: `${first_name} ${last_name}`

Dynamic functions in **DataEntry** provide a flexible way to inject dynamic values into the schema. These functions can be used to generate values that are evaluated at runtime, such as timestamps, unique identifiers, or other user-defined logic. This document explains the built-in dynamic functions, how to extend them with custom functions, and how to use them in the schema.


### Combining Dynamic Data

You can combine mutiple dynamic values in a single string:

```json
{
  "headline": "${t:product_name}: ${name} (${id})",
  "description": "${t:created_on} ${d:now}"
}
```

## Built-in Dynamic Methods

### 1. **now**

The `now` function returns the current date and time in the format `yyyy-MM-ddThh:mm`. This can be used for setting default date-time values in the schema.

#### Example Output:
```
2024-09-23T14:30
```

### 2. **uuid**

The `uuid` function generates a universally unique identifier (UUID). This is useful when you need to create unique keys for new data entries.

#### Example Output:
```
b1b754a0-5c12-11ec-bf63-0242ac130002
```

### 3. **today**

The `today` function returns the current date in `yyyy-MM-dd` format, which is commonly used for date input fields.

#### Example Output:
```
2024-09-23
```

## Using Dynamic Functions in the Schema

You can use dynamic functions directly within the schema to set default values for form fields. The values generated by these functions are injected into the form at runtime.

### Syntax for Using Dynamic Functions

Dynamic functions in the schema should be referenced using the following pattern:

```
"value": "${d:functionName}"
```

Here, `${d:functionName}` represents a dynamic function, where `d` stands for "dynamic" and `functionName` is the name of the function you want to call.

### Example:

```json
{
  "type": "object",
  "properties": {
    "created_at": {
      "type": "string",
      "title": "Created At",
      "value": "${d:now}",
      "render": {
        "method": "input",
        "attributes": [
          { "name": "created_at" }
        ]
      }
    },
    "unique_id": {
      "type": "string",
      "title": "Unique ID",
      "value": "${d:uuid}",
      "render": {
        "method": "input",
        "attributes": [
          { "name": "unique_id" }
        ]
      }
    }
  }
}
```

In this example:
- The **created_at** field will have the current date and time as the default value.
- The **unique_id** field will have a generated UUID as the default value.

## Extending Dynamic Functions

You can define your own dynamic functions to extend the functionality provided by DataEntry. To do this, use the `extendDynamicFunction` method:

```js
extendDynamicFunction('currentYear', () => {
  return new Date().getFullYear();
});
```

Then, in your schema, add this:

```json
{
  "copyright": "${d:currentYear} ${company_name}"
}
```
