<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<head>
	<title>TEST</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
	<meta name="description" content="HTML is the foundation of the World Wide Web, and it is still the most popular markup language in use today.">
	<link rel="stylesheet" href="/base.css">
	<style>
		svg { 
			height: 2em;
			fill: none;
			stroke: #999;
			stroke-width: 1.5;
			width: 2em;
		 }
	</style>
</head>
<body>
	<h1>Render Test</h1>

	<form id="app"></form>
<script type="module">
	import { renderAttributes, renderButton, renderElement, renderFieldset, renderGroup, renderIcon, renderInput, setForm, setIconObject } from './render.js';
	import icons from './icons.js';
	import tools from './tools.json' assert { type: 'json' };
	import config from './styles.json' assert { type: 'json' };

	setIconObject(icons);

	function renderTools(tools, config) {
		const toolbar = renderFieldset({
			name: 'tools',
			part: 'tabgroup',
			fields: tools.map(tool => ({
				ui: 'input',
				obj: {
					icon: tool.icon,
					input: { type: 'radio', name: 'tool', value: tool.name, 'data-sr': '' },
					label: { title: tool.title }
				}
			}))
		});

		const output = tools.map(tool => {
			const configItem = findObjectByKey(tool.key, config) || {};
			setForm(tool.key);
			return `
			<div part="tool">
				${tool.fieldsets ? tool.fieldsets.map(renderFieldset).join('') : ''}
				${tool.groups ? tool.groups.map(renderGroup).join('') : ''}
				${configItem.groups ? configItem.groups.map(renderGroup).join('') : ''}
			</div>
		`}).join('');

		return `${toolbar}<div part="tools">${output}</div>`;
	}

	const findObjectByKey = (key, array) => array.find(item => item.key === key) || null;


	app.innerHTML = renderTools(tools, config);
		
	</script>


</body>
</html>