<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<head>
	<title>Data Grid</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
	<meta name="description" content="HTML is the foundation of the World Wide Web, and it is still the most popular markup language in use today.">
	<!--<meta name="view-transition" content="same-origin">-->
	<link rel="stylesheet" href="/base.css">
	<link rel="stylesheet" href="./../table/ui-table.css">
	<link rel="stylesheet" href="./ui-datagrid.css">
	<style>
		/* Demo */
		ui-datagrid b { font-weight: 500; }
		ui-datagrid .dg-gray { color: var(--GrayText); }
	</style>
</head>
<body>
	<h1>UI: Components</h1>

	<h2>Data Grid</h2>
	<p><code>&lt;ui-datagrid&gt;</code> is a custom element, you can wrap around an existing <code>&lt;table&gt;</code>, or fill with data using the <code>src</code>-attribute. The latter can be either a stringified object or an endpoint.</p>
	<hr>
	<p>Example with data from an endpoint set in <code>src</code>, and most features enabled, including <code>debug</code>, outputting rendering etc. to the <code>console</code>.</p>

	<ui-datagrid
		debug
		density
		editable
		exportable
		id="grid"
		itemsperpage="10"
		page="0"
		printable
		searchable
		selectable
		src="./data.json"
		tableclass="ui-table --rounded --th-light --hover-all --hover-tr-outline">
	</ui-datagrid>

	<br>
	<h2>Event Playground</h2>
	<p>See the <code>console</code></p>

	<button id="getrow" type="button">dg:getrow</button>
	<button id="getselected" type="button">dg:getselected</button>
	<button id="clearselected" type="button">dg:clearselected</button>
	<button id="append" type="button">dg:append</button>

	<br>
	<hr>
	<p>Example: Wrapped around an existing <code>&lt;table&gt;</code>, with custom <code>lang</code> and <code>i18n</code>, set directly in HTML-attributes.</p>

	<ui-datagrid
		editable
		lang="da"
		i18n='{"da":{"all":"Alle","next":"Næste","of":"af","page":"Side","prev":"Forrige","selected":"valgt","rowsPerPage":"Rækker"}}'
		itemsperpage="5"
		page="0">
		<table class="ui-table --rounded --th-light --hover-all">
			<thead>
				<tr><th data-uid hidden>ID</th><th>First Name</th><th>Last Name</th><th>Known As</th><th>Place</th></tr>
			</thead>
			<tbody>
				<tr><td hidden>1</td><td>Bruce</td><td>Wayne</td><td>Batman</td><td>Gotham City</td></tr>
				<tr><td hidden>2</td><td>Clark</td><td>Kent</td><td>Superman</td><td>Metropolis</td></tr>
				<tr><td hidden>3</td><td>Tony</td><td>Stark</td><td>Iron Man</td><td>Malibu</td></tr>
				<tr><td hidden>4</td><td>Peter</td><td>Parker</td><td>Spider-Man</td><td>New York City</td></tr>
				<tr><td hidden>5</td><td>Matt</td><td>Murdock</td><td>Daredevil</td><td>New York City</td></tr>
				<tr><td hidden>6</td><td>Steve</td><td>Rogers</td><td>Captain America</td><td>Washington, D.C.</td></tr>
				<tr><td hidden>7</td><td>Diana</td><td>Prince</td><td>Wonder Woman</td><td>Themyscira</td></tr>
				<tr><td hidden>8</td><td>Arthur</td><td>Curry</td><td>Aquaman</td><td>Atlantis</td></tr>
				<tr><td hidden>9</td><td>Natasha</td><td>Romanoff</td><td>Black Widow</td><td>Moscow</td></tr>
				<tr><td hidden>10</td><td>Barry</td><td>Allen</td><td>The Flash</td><td>Central City</td></tr>
				<tr><td hidden>11</td><td>Hal</td><td>Jordan</td><td>Green Lantern</td><td>Coast City</td></tr>
				<tr><td hidden>12</td><td>Wanda</td><td>Maximoff</td><td>Scarlet Witch</td><td>Transia</td></tr>
				<tr><td hidden>13</td><td>Bruce</td><td>Banner</td><td>Hulk</td><td>Gamma Base</td></tr>
				<tr><td hidden>14</td><td>Scott</td><td>Lang</td><td>Ant-Man</td><td>San Francisco</td></tr>
				<tr><td hidden>15</td><td>Carol</td><td>Danvers</td><td>Captain Marvel</td><td>Harmony Grove</td></tr>
				<tr><td hidden>16</td><td>T&apos;Challa</td><td>Challa</td><td>Black Panther</td><td>Wakanda</td></tr>
			</tbody>
		</table>
	</ui-datagrid>

	<!-- <p>With data set as JSON in the <code>src</code>-attribute:</p>

	<ui-datagrid
		src='{"tbody":[{"id":"1","firstName":"Bruce","lastName":"Wayne","knownAs":"Batman","place":"GothamCity"},{"id":"2","firstName":"Clark","lastName":"Kent","knownAs":"Superman","place":"Metropolis"}],"thead":[{"field":"id","hidden":true,"label":"ID","uid":true},{"field":"firstName","hidden":false,"label":"FirstName","uid":false},{"field":"lastName","hidden":false,"label":"LastName","uid":false},{"field":"knownAs","hidden":false,"label":"KnownAs","uid":false},{"field":"place","hidden":false,"label":"Place","uid":false}]}'
		tableclass="ui-table --rounded --th-light --hover-all">
	</ui-datagrid> -->

	<br>
	<hr>

	<p>Example: Created from JavaScript with <code>document.createElement('ui-datagrid')</code>, with custom <code>i18n</code> and <code>formatters</code>-objects.</p>

	<script type="module" src="uiDataGrid.js"></script>

	<script>
		/* EVENT PLAYGROUND */

		const grid = document.getElementById('grid');
		grid.addEventListener('pagechange', (e) => { console.log('pagechange', e.detail); });
		grid.addEventListener('cellchange', (e) => { console.log('cellchange', e.detail); });
		grid.addEventListener('selection', (e) => { console.log('selection', e.detail); });
		grid.addEventListener('dg:row', (e) => { console.log('Active Row', e.detail); });
		grid.addEventListener('dg:selected', (e) => { console.log('Selected Rows', e.detail); });

		const getRow = document.getElementById('getrow');
		getRow.addEventListener('click', () => {
			grid.dispatchEvent(new CustomEvent('dg:getrow'));
		 });

		const getSelected = document.getElementById('getselected');
		getSelected.addEventListener('click', () => {
			grid.dispatchEvent(new CustomEvent('dg:getselected'));
		 });

		const clearSelected = document.getElementById('clearselected');
		clearSelected.addEventListener('click', () => {
			grid.dispatchEvent(new CustomEvent('dg:clearselected'));
		 });

		 const dataToAppend = [
				{
					firstname: "Ugo",
					lastname: "Quaisse",
					email: "ugo@quaisse.fr",
					gender: "Male",
					city: "Paris",
					country: "France"
				},
				{
					firstname: "Steven",
					lastname: "Singh",
					email: "steven@singh.dk",
					gender: "Male",
					city: "Copenhagen",
					country: "Denmark"
				}
			];

		const append = document.getElementById('append');
		append.addEventListener('click', () => {
			grid.dispatchEvent(new CustomEvent('dg:append', { detail: dataToAppend }));
		 });

	</script>

	<script>
		const uiDataGrid = document.createElement('ui-datagrid');
		uiDataGrid.setAttribute('src', './data.json');

		const formatters = {
			bold: (value) => `<strong>${value}</strong>`,
			email: (value) => `<a href="mailto:${value}" tabindex="-1">${value}</a>`,
			semibold: (value) => `<b>${value}</b>`,
			gray: (value) => `<span class="dg-gray">${value}</span>`,
		}

		const i18n = {
			fr: {
				all: 'Tout',
				endsWith: 'Se termine par',
				equals: 'Égale',
				first: 'Premier',
				includes: 'Comprend',
				last: 'Dernier',
				next: 'Suivant',
				noResult: 'Aucun résultat',
				of: 'de',
				page: 'Page',
				prev: 'Précédent',
				rowsPerPage: 'Lignes par page',
				search: 'Filtrer les colonnes',
				selected: 'sélectionnés',
				startsWith: 'Commence par',
			}
		}

		uiDataGrid.formatters = formatters;
		uiDataGrid.setAttribute('i18n', JSON.stringify(i18n));
		uiDataGrid.setAttribute('itemsperpage', 5);
		uiDataGrid.setAttribute('lang', 'fr');
		uiDataGrid.setAttribute('page', 0);
		uiDataGrid.setAttribute('searchable', '');
		uiDataGrid.setAttribute('tableclass', 'ui-table --rounded --th-light --hover-all --hover-tr-outline');
		document.body.append(uiDataGrid);
		
		uiDataGrid.addEventListener('pagechange', (e) => { console.log('pagechange', e.detail); });


	</script>

</body>
</html>