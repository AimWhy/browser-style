@import 'input.range.css';

:where(input) { accent-color: var(--accent-color); }
:where(input:not([type="checkbox"]):not([type="file"]):not([type="radio"]):not([type="range"]), select, textarea) {
	--input-icon-pos: 0.75em;
	--input-icon-w: 1.5em;

	-webkit-appearance: none;
	-moz-appearance: none;
	appearance: none;
	background-color: var(--input-bgc, #fff0);
	background-image: var(--input-bgi, none);
	background-position: center right var(--input-icon-pos);
	background-size: var(--input-icon-w) auto;
	background-repeat: no-repeat;
	block-size: calc(var(--input-fz) * var(--body-lh) + var(--input-pb) * 2 + var(--input-bdw) * 2);
	border-color: var(--input-bdc);
	border-radius: var(--input-bdrs);
	border-style: var(--input-bds);
	border-width: var(--input-bdw);
	inline-size: var(--input-w, 100%);
	padding-block: var(--input-pb);
	padding-inline: var(--input-pi);
	position: relative;
}

/* disabled */
:where(button:disabled, input:disabled, select:disabled, textarea:disabled) {
	filter: grayscale(1);
	opacity: 0.4;
	cursor: not-allowed;
}

/* specific types */
:where(input[type="checkbox"], input[type="radio"]) {
	--input-bdw: 2px;
	--input-checkbox-sz: 1.5em;

	-webkit-appearance: none;
	appearance: none;
	block-size: var(--input-checkbox-sz);
	border-color: var(--input-bdc);
	border-radius: var(--input-bdrs);
	border-style: var(--input-bds);
	border-width: var(--input-bdw);
	cursor: pointer;
	inline-size: var(--input-checkbox-sz);
	margin-block-start: -0.125em;
	margin-inline-end: .75em;
	transition: all .2s ease-in-out;
	vertical-align: middle;
}

:where(input[type="radio"]) { border-radius: 50%; }
:where(input[type="radio"]:checked) {
	--input-bdw: .45em;
	border-color: var(--accent-color);
}

:where(input[type="checkbox"]:not([role="switch"]):checked) {
	background: var(--accent-color) var(--icon-check) center center / .75em no-repeat;
	border-color: var(--accent-color);
}

/* checkbox: switch */
:where(input[type="checkbox"][role="switch"]) {
	--input-bdw: 2px;
	--input-switch-sz: 1.5em;
	background-color: var(--input-switch-bgc, var(--gray-5));
	block-size: var(--input-switch-sz);
	border-radius: var(--input-switch-sz);
	border: var(--input-bdw) solid var(--input-bdc);
	inline-size: calc(1.8 * var(--input-switch-sz));
	position: relative;
}

:where(input[type="checkbox"][role="switch"])::before {
	aspect-ratio: 1;
	display: block;
	inline-size: calc(var(--input-switch-sz) - (var(--input-bdw) * 2));
	border-radius: 50%;
	background-color: var(--input-switch-c, #fff);
	content: "";
	position: absolute;
	transition: all .2s ease-in-out;
}

:where(input[type="checkbox"][role="switch"]:checked) {
	background-color: var(--accent-color);
	border-color: var(--accent-color);
}
:where(input[type="checkbox"][role="switch"]:checked)::before {
	inset-inline-end: 0;
}

/* icons */
:where(input[data-bs~="icon"]),
:where(input[type="date"]),
:where(input[type="datetime-local"]),
:where(input[type="month"]),
:where(input[type="time"]),
:where(input[type="week"]),
:where(select) {
	padding-inline-end: calc(var(--input-icon-w) + var(--input-icon-pos));
}
:where(input[data-bs~="start"]) {
	background-position: center left var(--input-icon-pos);
	padding-inline-end: var(--input-pi);
	padding-inline-start: calc(var(--input-icon-w) + var(--input-icon-pos) + var(--input-pi));
}

:where(input[type="color"]) { padding-inline: var(--input-pb); }
:where(input[type="color"])::-webkit-color-swatch-wrapper { padding: 0; }
:where(input[type="color"])::-webkit-color-swatch { border-radius: var(--input-bdrs); }
:where(input[type="date"]),
:where(input[type="datetime-local"]) { --input-bgi: var(--icon-date); }
:where(input[type="email"][data-bs~="icon"]) { --input-bgi: var(--icon-email); }
:where(input[type="month"]) { --input-bgi: var(--icon-month); }
:where(input[type="number"][data-bs~="icon"]) { --input-bgi: var(--icon-number); }
:where(input[type="password"][data-bs~="icon"]) { --input-bgi: var(--icon-password); }
:where(input[type="search"][data-bs~="icon"]) { --input-bgi: var(--icon-search); }
:where(input[type="tel"][data-bs~="icon"]) { --input-bgi: var(--icon-phone); }
:where(input[type="time"]) { --input-bgi: var(--icon-time); }
:where(input[type="url"][data-bs~="icon"]) { --input-bgi: var(--icon-url); }
:where(input[type="week"]) { --input-bgi: var(--icon-week); }
:where(select) { --input-bgi: var(--icon-chevron-down); }
:where(textarea) {
	--textarea-sz: calc(var(--input-fz) * var(--body-lh) + var(--input-pb) * 2 + var(--input-bdw) * 2);
	min-block-size: var(--textarea-sz);
	resize: vertical;
}
:where(textarea[rows="4"]) {
	min-block-size: calc(2 * var(--textarea-sz));
}

/* date, datetime-local, month, week  */
:where(input)::-webkit-calendar-picker-indicator {
	opacity: 0;
	block-size: var(--input-icon-w);
	inline-size: var(--input-icon-w);
	margin: var(--input-icon-pos) calc(var(--input-icon-w) * -1);
}

/* file button */
:where(input[type=file])::-webkit-file-upload-button {
	block-size: calc(var(--input-fz) * var(--body-lh) + var(--input-pb) * 2 + var(--input-bdw) * 2);
	border-radius: var(--button-bdrs, var(--input-bdrs, initial));
	border-color: var(--button-bdc, transparent);
	border-style: var(--button-bds, solid);
	border-width: var(--button-bdw, var(--input-bdw, initial));
	font-size: var(--input-fz, inherit);
	font-weight: var(--button-fw, 400);
	padding-block: var(--input-pb);
	padding-inline: var(--input-pi);
}

:where(input[type=file])::file-selector-button {
	block-size: calc(var(--input-fz) * var(--body-lh) + var(--input-pb) * 2 + var(--input-bdw) * 2);
	border-radius: var(--button-bdrs, var(--input-bdrs, initial));
	border-color: var(--button-bdc, transparent);
	border-style: var(--button-bds, solid);
	border-width: var(--button-bdw, var(--input-bdw, initial));
	font-size: var(--input-fz, inherit);
	font-weight: var(--button-fw, 400);
	padding-block: var(--input-pb);
	padding-inline: var(--input-pi);
}

/* datalist */
:where(input[list]::-webkit-list-button) {
	display: none;
}

/* search reset-button */
:where(input[type="search"])::-webkit-search-cancel-button {
	background-color: currentColor;
	block-size: var(--input-icon-w);
	inline-size: var(--input-icon-w);
	margin: 0;
	mask-image: var(--icon-reset);
	position: absolute;
	right: 0.75em;
	-webkit-appearance: none;
	-webkit-mask-image: var(--icon-reset);
}

/* validation */
input:required:not(:focus-visible):not(:placeholder-shown):invalid {
	border-color: var(--color-danger);
	box-shadow: var(--color-danger) 0 0 1px 1px inset;
}